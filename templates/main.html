{% extends "layout.html" %}
{% from "macros/article.html" import render_article %}
{% block title %}{{ this.title }}{% endblock %}
{% block bodyclass %}main{% endblock %}
{% block body %}

    {% set blocks = this.body.blocks %}
    {% set posts = site.query('/articles').limit(blocks|length * 3) %}
    {% for block in blocks %}

        <section class="articles">
            <h2>Recent articles</h2>
            {% for post in posts.limit(3) %}
                {{ render_article(post, true) }}
            {% endfor %}

            <nav>
                <a href="/articles">Read more articles â€¦</a>
            </nav>
        </section>

        {{ block }}
    {% endfor %}

{% endblock %}
